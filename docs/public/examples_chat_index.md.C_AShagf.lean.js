import{V as m}from"./chunks/VirtualList.c0QhsyoC.js";import{a as y}from"./chunks/common.ag3T3Vnt.js";import{_ as F,o as r,c as d,k as s,t as n,D as k,I as l,a2 as A,a4 as f,a5 as v,w as E,p as _,q as x,a as c,R as q}from"./chunks/framework.UVXzjgAp.js";import{O as R}from"./chunks/OperateGroup.zxeV3phK.js";import"./chunks/ObserverItem.Ik21bs68.js";const b={props:{itemData:{type:Object,default(){return{}}},index:{type:Number,default:0}}},L={class:"row-item"},T={class:"row-message"};function S(i,t,h,p,a,e){return r(),d("div",L,[s("div",T,n(h.itemData.index)+" - "+n(h.itemData.id)+" - "+n(h.itemData.text),1)])}const z=F(b,[["render",S],["__scopeId","data-v-35604d05"]]),I={name:"DemoChat",components:{Item:z,VirtualList:m,Operate:R},data(){return{visible:!0,list:[],reactiveData:{renderBegin:0,renderEnd:0},isFirstRender:!0,pageMax:5,page:5,pageSize:40,loading:!1,virtualListRef:null}},async created(){this.list=await y(this.pageSize,(this.page-1)*this.pageSize)},mounted(){this.virtualListRef=this.$refs.virtualListRef,this.reactiveData=this.virtualListRef.reactiveData},methods:{async toTop(){if(console.log("toTop"),this.loading||this.page<=1)return;this.loading=!0;const i=await y(this.pageSize,(this.page-2)*this.pageSize,1e3);this.list=i.concat(this.list),this.$nextTick(()=>{var t;(t=this.virtualListRef)==null||t.addedList2Top(i),this.page-=1,this.loading=!1})},itemResize(){var i;this.isFirstRender&&(this.isFirstRender=!1,(i=this.virtualListRef)==null||i.scrollToBottom())}}},g=i=>(_("data-v-e7ad36c4"),i=i(),x(),i),w={class:"main"},V={style:{padding:"10px 0"}},O=g(()=>s("span",null,"   ",-1)),N=g(()=>s("span",null,"   ",-1)),P={class:"demo-chat"},$=g(()=>s("div",{style:{width:"100%",height:"20px",display:"flex","justify-content":"center","align-items":"center","background-color":"chocolate"}}," loading... ",-1));function G(i,t,h,p,a,e){const o=k("Operate"),C=k("Item"),B=k("VirtualList");return r(),d("div",w,[l(o,{virtualListRef:a.virtualListRef,length:a.list.length,visible:a.visible},null,8,["virtualListRef","length","visible"]),s("div",V,[s("span",null,"Total: "+n(a.list.length),1),O,s("span",null,"RenderBegin: "+n(a.reactiveData.renderBegin),1),N,s("span",null,"RenderEnd: "+n(a.reactiveData.renderEnd),1)]),A(s("div",P,[l(B,{ref:"virtualListRef",list:a.list,itemKey:"index",minSize:60,onToTop:e.toTop,onItemResize:e.itemResize},v({default:E(({itemData:u,index:D})=>[l(C,{itemData:u,index:D},null,8,["itemData","index"])]),_:2},[a.page>1?{name:"header",fn:E(()=>[$]),key:"0"}:void 0]),1032,["list","onToTop","onItemResize"])],512),[[f,a.visible]])])}const j=F(I,[["render",G],["__scopeId","data-v-e7ad36c4"]]),M=s("h1",{id:"聊天室",tabindex:"-1"},[c("聊天室 "),s("a",{class:"header-anchor",href:"#聊天室","aria-label":'Permalink to "聊天室"'},"​")],-1),K=s("h2",{id:"基础示例",tabindex:"-1"},[c("基础示例 "),s("a",{class:"header-anchor",href:"#基础示例","aria-label":'Permalink to "基础示例"'},"​")],-1),J=q("",1),Z=JSON.parse('{"title":"聊天室","description":"","frontmatter":{},"headers":[],"relativePath":"examples/chat/index.md","filePath":"examples/chat/index.md"}'),H={name:"examples/chat/index.md"},ss=Object.assign(H,{setup(i){return(t,h)=>{const p=k("ClientOnly");return r(),d("div",null,[M,K,l(p,null,{default:E(()=>[l(j)]),_:1}),J])}}});export{Z as __pageData,ss as default};
